(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{7360:function(e,t,s){Promise.resolve().then(s.bind(s,9958))},9958:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(7437),r=s(9954),n=s(2265),i=s(2496);function l(){let[e,t]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(!1),{signIn:x,signUp:u,signInWithGoogle:h,resetPassword:p}=(0,r.a)(),j=async t=>{t.preventDefault(),m(!0);try{c?await u(e,s):await x(e,s)}catch(e){console.error("Authentication error:",e)}finally{m(!1)}},v=async()=>{m(!0);try{await h()}catch(e){console.error("Google sign in error:",e)}finally{m(!1)}},g=async()=>{if(!e){alert("Please enter your email address first");return}try{await p(e)}catch(e){console.error("Password reset error:",e)}};return(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",required:!0,className:"form-input mt-1",value:e,onChange:e=>t(e.target.value),placeholder:"Enter your email"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",required:!0,className:"form-input mt-1",value:s,onChange:e=>l(e.target.value),placeholder:"Enter your password"})]}),(0,a.jsx)("button",{type:"submit",disabled:o,className:"btn btn-primary w-full",children:o?(0,a.jsx)(i.Z,{size:"sm"}):c?"Create Account":"Sign In"})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,a.jsxs)("button",{type:"button",onClick:v,disabled:o,className:"btn btn-outline w-full mt-4",children:[(0,a.jsxs)("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})]}),(0,a.jsxs)("div",{className:"mt-6 text-center space-y-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>d(!c),className:"text-sm text-primary-600 hover:text-primary-500",children:c?"Already have an account? Sign in":"Don't have an account? Sign up"}),!c&&(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"button",onClick:g,className:"text-sm text-gray-600 hover:text-gray-500",children:"Forgot your password?"})})]})]})})}var c=s(5978),d=s(6410),o=s(5598),m=s(5434),x=s(9064);function u(e){let{onClose:t,onUploadComplete:s}=e,[r,l]=(0,n.useState)(""),[c,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(!1),{getRootProps:j,getInputProps:v,isDragActive:g}=(0,o.uI)({accept:{"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxFiles:1,onDrop:e=>{e.length>0&&(u(e[0]),r||l(e[0].name.replace(/\.[^/.]+$/,"")))}}),b=async()=>{if(!c||!r.trim()){x.ZP.error("Please select a file and enter a template name");return}p(!0);try{var e;let t=(0,m.V1)(d.wk,"uploadTemplateAndParse"),{uploadUrl:a}=(await t({fileName:c.name,fileType:null===(e=c.name.split(".").pop())||void 0===e?void 0:e.toLowerCase(),templateName:r.trim()})).data.data;if(!(await fetch(a,{method:"PUT",body:c,headers:{"Content-Type":c.type}})).ok)throw Error("Failed to upload file");x.ZP.success("Template uploaded successfully! AI parsing will begin shortly."),s()}catch(e){console.error("Upload error:",e),x.ZP.error(e.message||"Failed to upload template")}finally{p(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Upload Template"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("div",{className:"card-content space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"templateName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name"}),(0,a.jsx)("input",{id:"templateName",type:"text",value:r,onChange:e=>l(e.target.value),className:"form-input",placeholder:"Enter template name",required:!0})]}),c?(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:c.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[(c.size/1024/1024).toFixed(2)," MB"]})]})]}),(0,a.jsx)("button",{onClick:()=>{u(null)},className:"text-red-600 hover:text-red-800",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):(0,a.jsxs)("div",{...j(),className:"\n                  border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors\n                  ".concat(g?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-primary-400 hover:bg-gray-50","\n                "),children:[(0,a.jsx)("input",{...v()}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("svg",{className:"w-12 h-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:g?"Drop the file here...":"Drag & drop a file here, or click to select"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Supports PDF and DOCX files"})]})]})]}),(0,a.jsx)("div",{className:"card-footer",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:t,disabled:h,className:"btn btn-outline",children:"Cancel"}),(0,a.jsx)("button",{onClick:b,disabled:!c||!r.trim()||h,className:"btn btn-primary",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{size:"sm"}),(0,a.jsx)("span",{className:"ml-2",children:"Uploading..."})]}):"Upload & Parse"})]})})]})})})}function h(){let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[l,o]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,c.IO)((0,c.hJ)(d.db,"templates"));return(0,c.cf)(e,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{var s,a;return(null===(s=t.createdAt)||void 0===s?void 0:s.toDate())-(null===(a=e.createdAt)||void 0===a?void 0:a.toDate())})),r(!1)})},[]);let m=async e=>{if(confirm("Are you sure you want to delete this template?"))try{await (0,c.oe)((0,c.JU)(d.db,"templates",e))}catch(e){console.error("Error deleting template:",e)}},x=e=>(0,a.jsx)("span",{className:{uploaded:"status-info",parsing:"status-warning",parsed:"status-success",error:"status-error"}[e]||"status-neutral",children:e.charAt(0).toUpperCase()+e.slice(1)});return s?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)(i.Z,{})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Template Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Upload and manage document templates"})]}),(0,a.jsx)("button",{onClick:()=>o(!0),className:"btn btn-primary",children:"+ Upload Template"})]}),0===e.length?(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates uploaded"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Get started by uploading your first document template"}),(0,a.jsx)("button",{onClick:()=>o(!0),className:"btn btn-primary",children:"Upload Template"})]})}):(0,a.jsx)("div",{className:"grid gap-6",children:e.map(e=>{var t,s;return(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"card-content",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),x(e.status)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["File: ",e.originalFileName," (",e.fileType.toUpperCase(),")"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Uploaded: ",null===(t=e.createdAt)||void 0===t?void 0:t.toDate().toLocaleDateString()]}),"parsed"===e.status&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Extracted Fields: ",(null===(s=e.extractedFields)||void 0===s?void 0:s.length)||0]}),e.extractedFields&&e.extractedFields.length>0&&(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[e.extractedFields.slice(0,5).map((e,t)=>(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:e.label},t)),e.extractedFields.length>5&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-100 text-gray-600",children:["+",e.extractedFields.length-5," more"]})]})]}),"error"===e.status&&e.errorMessage&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded",children:(0,a.jsxs)("p",{className:"text-sm text-red-700",children:["Error: ",e.errorMessage]})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["parsing"===e.status&&(0,a.jsx)(i.Z,{size:"sm"}),(0,a.jsx)("button",{onClick:()=>m(e.id),className:"text-red-600 hover:text-red-800 p-2",title:"Delete template",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})},e.id)})}),l&&(0,a.jsx)(u,{onClose:()=>o(!1),onUploadComplete:()=>o(!1)})]})}function p(){let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)([]),[l,o]=(0,n.useState)(!0),[u,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,c.IO)((0,c.hJ)(d.db,"services")),s=(0,c.cf)(e,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{var s,a;return(null===(s=t.createdAt)||void 0===s?void 0:s.toDate())-(null===(a=e.createdAt)||void 0===a?void 0:a.toDate())}))}),a=(0,c.IO)((0,c.hJ)(d.db,"templates")),n=(0,c.cf)(a,e=>{r(e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>"parsed"===e.status)),o(!1)});return()=>{s(),n()}},[]);let p=async e=>{if(confirm("Are you sure you want to delete this service?"))try{let t=(0,m.V1)(d.wk,"deleteServiceRequest");await t({serviceId:e}),x.ZP.success("Service deleted successfully")}catch(e){console.error("Error deleting service:",e),x.ZP.error(e.message||"Failed to delete service")}},v=async(e,t)=>{try{let s="active"===t?"inactive":"active",a=(0,m.V1)(d.wk,"updateServiceRequest");await a({serviceId:e,updates:{status:s}}),x.ZP.success("Service ".concat("active"===s?"activated":"deactivated"))}catch(e){console.error("Error updating service status:",e),x.ZP.error(e.message||"Failed to update service status")}},g=e=>(0,a.jsx)("span",{className:{draft:"status-neutral",active:"status-success",inactive:"status-error"}[e]||"status-neutral",children:e.charAt(0).toUpperCase()+e.slice(1)});return l?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)(i.Z,{})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Service Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Create and manage service requests"})]}),(0,a.jsx)("button",{onClick:()=>h(!0),className:"btn btn-primary",children:"+ Create Service"})]}),0===e.length?(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsxs)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No services created"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first service to start generating intake forms"}),(0,a.jsx)("button",{onClick:()=>h(!0),className:"btn btn-primary",children:"Create Service"})]})}):(0,a.jsx)("div",{className:"grid gap-6",children:e.map(e=>{var t,r,n;return(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"card-content",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),g(e.status)]}),(0,a.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[(0,a.jsxs)("span",{children:["Templates: ",(null===(t=e.templateIds)||void 0===t?void 0:t.length)||0]}),(0,a.jsxs)("span",{children:["Fields: ",(null===(r=e.masterFormJson)||void 0===r?void 0:r.length)||0]}),(0,a.jsxs)("span",{children:["Created: ",null===(n=e.createdAt)||void 0===n?void 0:n.toDate().toLocaleDateString()]})]}),e.templateIds&&e.templateIds.length>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Associated Templates:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.templateIds.map(e=>{let t=s.find(t=>t.id===e);return(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:(null==t?void 0:t.name)||"Unknown Template"},e)})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>v(e.id,e.status),className:"btn btn-sm ".concat("active"===e.status?"btn-outline":"btn-primary"),children:"active"===e.status?"Deactivate":"Activate"}),(0,a.jsx)("button",{onClick:()=>p(e.id),className:"text-red-600 hover:text-red-800 p-2",title:"Delete service",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})},e.id)})}),u&&(0,a.jsx)(j,{templates:s,onClose:()=>h(!1),onServiceCreated:()=>h(!1)})]})}function j(e){let{templates:t,onClose:s,onServiceCreated:r}=e,[l,c]=(0,n.useState)(""),[o,u]=(0,n.useState)(""),[h,p]=(0,n.useState)([]),[j,v]=(0,n.useState)(!1),g=async e=>{if(e.preventDefault(),!l.trim()||!o.trim()||0===h.length){x.ZP.error("Please fill in all fields and select at least one template");return}v(!0);try{let e=(0,m.V1)(d.wk,"createServiceRequest");await e({name:l.trim(),description:o.trim(),templateIds:h}),x.ZP.success("Service created successfully!"),r()}catch(e){console.error("Error creating service:",e),x.ZP.error(e.message||"Failed to create service")}finally{v(!1)}},b=e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-hidden",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Create New Service"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("form",{onSubmit:g,className:"card-content space-y-4 overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"serviceName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name"}),(0,a.jsx)("input",{id:"serviceName",type:"text",value:l,onChange:e=>c(e.target.value),className:"form-input",placeholder:"Enter service name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"serviceDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"serviceDescription",value:o,onChange:e=>u(e.target.value),className:"form-textarea",rows:3,placeholder:"Describe what this service is for",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Templates (",h.length," selected)"]}),0===t.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 p-4 border border-gray-200 rounded",children:"No parsed templates available. Please upload and parse templates first."}):(0,a.jsx)("div",{className:"border border-gray-200 rounded max-h-40 overflow-y-auto",children:t.map(e=>(0,a.jsxs)("label",{className:"flex items-center p-3 border-b last:border-b-0 hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.includes(e.id),onChange:()=>b(e.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,a.jsx)("span",{className:"ml-3 text-sm text-gray-900",children:e.name})]},e.id))})]})]}),(0,a.jsx)("div",{className:"card-footer",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:s,disabled:j,className:"btn btn-outline",children:"Cancel"}),(0,a.jsx)("button",{onClick:g,disabled:j||0===h.length,className:"btn btn-primary",children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{size:"sm"}),(0,a.jsx)("span",{className:"ml-2",children:"Creating..."})]}):"Create Service"})]})})]})})})}function v(){let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[l,o]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,c.IO)((0,c.hJ)(d.db,"intakes"),(0,c.Xo)("createdAt","desc"));return(0,c.cf)(e,e=>{t(e.docs.map(e=>({id:e.id,...e.data()}))),r(!1)})},[]);let p=async(e,t)=>{try{let s=(0,m.V1)(d.wk,"approveIntakeForm");await s({intakeId:e,approved:t}),x.ZP.success("Intake ".concat(t?"approved":"rejected"," successfully"))}catch(e){console.error("Error approving intake:",e),x.ZP.error(e.message||"Failed to update intake status")}},j=async e=>{try{let t=(0,m.V1)(d.wk,"generateDocumentsFromIntake");await t({intakeId:e}),x.ZP.success("Document generation started")}catch(e){console.error("Error generating documents:",e),x.ZP.error(e.message||"Failed to generate documents")}},v=e=>{let t=window.location.origin,s="".concat(t,"/intake/").concat(e.linkToken);navigator.clipboard.writeText(s),x.ZP.success("Intake link copied to clipboard")},b=e=>(0,a.jsx)("span",{className:{"link-generated":"status-neutral",opened:"status-info","in-progress":"status-warning",submitted:"status-info",approved:"status-success",rejected:"status-error","documents-generated":"status-success"}[e]||"status-neutral",children:{"link-generated":"Link Generated",opened:"Opened","in-progress":"In Progress",submitted:"Submitted",approved:"Approved",rejected:"Rejected","documents-generated":"Documents Generated"}[e]||e}),f=e=>e.expiresAt&&e.expiresAt.toDate()<new Date;return s?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)(i.Z,{})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Intake Monitor"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Monitor and manage client intake submissions"})]}),(0,a.jsx)("button",{onClick:()=>h(!0),className:"btn btn-primary",children:"+ Generate Intake Link"})]}),0===e.length?(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-content text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No intakes found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Generate intake links to start collecting client information"}),(0,a.jsx)("button",{onClick:()=>h(!0),className:"btn btn-primary",children:"Generate Intake Link"})]})}):(0,a.jsx)("div",{className:"grid gap-6",children:e.map(e=>{var t;return(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"card-content",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.serviceName}),b(e.status),f(e)&&(0,a.jsx)("span",{className:"status-error",children:"Expired"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Created:"})," ",null===(t=e.createdAt)||void 0===t?void 0:t.toDate().toLocaleString()]}),e.submittedAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Submitted:"})," ",e.submittedAt.toDate().toLocaleString()]}),e.clientEmail&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Client Email:"})," ",e.clientEmail]}),e.clientName&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Client Name:"})," ",e.clientName]})]}),e.expiresAt&&(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-3",children:[(0,a.jsx)("span",{className:"font-medium",children:"Expires:"})," ",e.expiresAt.toDate().toLocaleString()]}),Object.keys(e.clientData||{}).length>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("button",{onClick:()=>o((null==l?void 0:l.id)===e.id?null:e),className:"text-sm text-primary-600 hover:text-primary-500 font-medium",children:[(null==l?void 0:l.id)===e.id?"Hide":"View"," Client Data"]}),(null==l?void 0:l.id)===e.id&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-gray-50 rounded border",children:(0,a.jsx)("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap overflow-x-auto",children:JSON.stringify(e.clientData,null,2)})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["submitted"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>p(e.id,!0),className:"btn btn-sm btn-primary",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>p(e.id,!1),className:"btn btn-sm btn-outline text-red-600 border-red-300 hover:bg-red-50",children:"Reject"})]}),"approved"===e.status&&(0,a.jsx)("button",{onClick:()=>j(e.id),className:"btn btn-sm btn-primary",children:"Generate Documents"}),["link-generated","opened","in-progress"].includes(e.status)&&!f(e)&&(0,a.jsx)("button",{onClick:()=>v(e),className:"btn btn-sm btn-outline",title:"Copy intake link",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})})},e.id)})}),u&&(0,a.jsx)(g,{onClose:()=>h(!1),onLinkGenerated:()=>h(!1)})]})}function g(e){let{onClose:t,onLinkGenerated:s}=e,[r,l]=(0,n.useState)([]),[o,u]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[j,v]=(0,n.useState)(30),[g,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,c.IO)((0,c.hJ)(d.db,"services"));return(0,c.cf)(e,e=>{l(e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>"active"===e.status))})},[]);let f=async e=>{if(e.preventDefault(),!o){x.ZP.error("Please select a service");return}b(!0);try{let e=(0,m.V1)(d.wk,"generateIntakeLink"),{intakeUrl:t}=(await e({serviceId:o,clientEmail:h||void 0,expiresInDays:j})).data.data;navigator.clipboard.writeText(t),x.ZP.success("Intake link generated and copied to clipboard!"),s()}catch(e){console.error("Error generating intake link:",e),x.ZP.error(e.message||"Failed to generate intake link")}finally{b(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Generate Intake Link"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("form",{onSubmit:f,className:"card-content space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"service",className:"block text-sm font-medium text-gray-700 mb-1",children:"Service"}),(0,a.jsxs)("select",{id:"service",value:o,onChange:e=>u(e.target.value),className:"form-select",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a service"}),r.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"clientEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Email (Optional)"}),(0,a.jsx)("input",{id:"clientEmail",type:"email",value:h,onChange:e=>p(e.target.value),className:"form-input",placeholder:"client@example.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"expiresInDays",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expires In (Days)"}),(0,a.jsx)("input",{id:"expiresInDays",type:"number",min:"1",max:"365",value:j,onChange:e=>v(parseInt(e.target.value)),className:"form-input"})]})]}),(0,a.jsx)("div",{className:"card-footer",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:t,disabled:g,className:"btn btn-outline",children:"Cancel"}),(0,a.jsx)("button",{onClick:f,disabled:g||!o,className:"btn btn-primary",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{size:"sm"}),(0,a.jsx)("span",{className:"ml-2",children:"Generating..."})]}):"Generate Link"})]})})]})})})}function b(){let[e,t]=(0,n.useState)("templates"),{user:s,signOut:i}=(0,r.a)();return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Smart Forms AI Admin"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Welcome, ",null==s?void 0:s.email]}),(0,a.jsx)("button",{onClick:i,className:"btn btn-outline btn-sm",children:"Sign Out"})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[{id:"templates",name:"Templates",icon:"\uD83D\uDCC4"},{id:"services",name:"Services",icon:"⚙️"},{id:"intakes",name:"Intakes",icon:"\uD83D\uDCDD"}].map(s=>(0,a.jsxs)("button",{onClick:()=>t(s.id),className:"\n                  whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2\n                  ".concat(e===s.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n                "),children:[(0,a.jsx)("span",{children:s.icon}),(0,a.jsx)("span",{children:s.name})]},s.id))})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["templates"===e&&(0,a.jsx)(h,{}),"services"===e&&(0,a.jsx)(p,{}),"intakes"===e&&(0,a.jsx)(v,{})]})]})}function f(){let{user:e,loading:t}=(0,r.a)();return t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(i.Z,{})}):e?(0,a.jsx)(b,{}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"max-w-md w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Login"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to access the dashboard"})]}),(0,a.jsx)(l,{})]})})}},2496:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437);function r(e){let{size:t="md"}=e;return(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t]," animate-spin rounded-full border-2 border-gray-300 border-t-primary-600")})})}},9954:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return d},a:function(){return o}});var a=s(7437),r=s(2265),n=s(3301),i=s(6410),l=s(9064);let c=(0,r.createContext)(void 0);function d(e){let{children:t}=e,[s,d]=(0,r.useState)(null),[o,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>(0,n.Aj)(i.I8,e=>{d(e),m(!1)}),[]);let x=async(e,t)=>{try{await (0,n.e5)(i.I8,e,t),l.ZP.success("Signed in successfully!")}catch(e){throw l.ZP.error(e.message||"Failed to sign in"),e}},u=async(e,t)=>{try{await (0,n.Xb)(i.I8,e,t),l.ZP.success("Account created successfully!")}catch(e){throw l.ZP.error(e.message||"Failed to create account"),e}},h=async()=>{try{let e=new n.hJ;await (0,n.rh)(i.I8,e),l.ZP.success("Signed in with Google successfully!")}catch(e){throw l.ZP.error(e.message||"Failed to sign in with Google"),e}},p=async()=>{try{await (0,n.w7)(i.I8),l.ZP.success("Signed out successfully!")}catch(e){throw l.ZP.error(e.message||"Failed to sign out"),e}},j=async e=>{try{await (0,n.LS)(i.I8,e),l.ZP.success("Password reset email sent!")}catch(e){throw l.ZP.error(e.message||"Failed to send password reset email"),e}};return(0,a.jsx)(c.Provider,{value:{user:s,loading:o,signIn:x,signUp:u,signInWithGoogle:h,signOut:p,resetPassword:j},children:t})}function o(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6410:function(e,t,s){"use strict";s.d(t,{I8:function(){return d},db:function(){return o},wk:function(){return m}});var a=s(738),r=s(3301),n=s(5978),i=s(62),l=s(5434);let c=0===(0,a.C6)().length?(0,a.ZF)({apiKey:"AIzaSyDEZrEwNAzOrpAvpm6XWuDjaGX4m8DK-cc",authDomain:"formgenai-4545.firebaseapp.com",projectId:"formgenai-4545",storageBucket:"formgenai-4545.firebasestorage.app",messagingSenderId:"34490364510",appId:"1:34490364510:web:ecad3f7a71bc3608fefacf"}):(0,a.C6)()[0],d=(0,r.v0)(c),o=(0,n.ad)(c);(0,i.cF)(c);let m=(0,l.$C)(c)}},function(e){e.O(0,[358,139,64,92,598,971,117,744],function(){return e(e.s=7360)}),_N_E=e.O()}]);